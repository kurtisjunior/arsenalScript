{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://arsenalscript.local/schemas/lineups.json",
  "title": "Lineup Data Schema",
  "description": "Schema for storing lineup and injury data for football matches, including rumored and confirmed lineups with source reliability tracking",
  "type": "object",
  "required": ["match_id", "timestamp", "injuries", "rumored_lineup", "confirmed_lineup", "source_reliability"],
  "properties": {
    "match_id": {
      "type": "string",
      "description": "Unique identifier for the match, typically in format 'YYYYMMDD_HOME_AWAY' or external API reference"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp indicating when this lineup data was last updated"
    },
    "injuries": {
      "type": "array",
      "description": "Array of current injuries affecting players for this match",
      "items": {
        "type": "object",
        "required": ["player", "status", "source"],
        "properties": {
          "player": {
            "type": "string",
            "description": "Name of the injured player"
          },
          "status": {
            "type": "string",
            "description": "Current injury status (e.g., 'out', 'doubtful', 'questionable', 'probable')",
            "enum": ["out", "doubtful", "questionable", "probable"]
          },
          "return_date": {
            "type": ["string", "null"],
            "format": "date",
            "description": "Expected return date in ISO 8601 date format, null if unknown"
          },
          "source": {
            "type": "string",
            "description": "Source of the injury information (e.g., 'official_club', 'press_conference', 'journalist')"
          }
        },
        "additionalProperties": false
      }
    },
    "rumored_lineup": {
      "type": ["object", "null"],
      "description": "Predicted or rumored lineup based on media reports and analysis, null if no rumors available",
      "required": ["formation", "players"],
      "properties": {
        "formation": {
          "type": "string",
          "description": "Tactical formation (e.g., '4-3-3', '4-2-3-1', '3-5-2')",
          "pattern": "^[0-9](-[0-9])+$"
        },
        "players": {
          "type": "array",
          "description": "Array of players in the rumored lineup with their positions",
          "minItems": 11,
          "maxItems": 11,
          "items": {
            "type": "object",
            "required": ["position", "name", "confidence"],
            "properties": {
              "position": {
                "type": "string",
                "description": "Position in the formation (e.g., 'GK', 'RB', 'CB', 'LB', 'CM', 'CAM', 'RW', 'LW', 'ST')"
              },
              "name": {
                "type": "string",
                "description": "Name of the player"
              },
              "confidence": {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "description": "Confidence level that this player will start in this position (0.0 to 1.0)"
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "confirmed_lineup": {
      "type": ["object", "null"],
      "description": "Official confirmed lineup, null if not yet announced",
      "required": ["formation", "players"],
      "properties": {
        "formation": {
          "type": "string",
          "description": "Tactical formation (e.g., '4-3-3', '4-2-3-1', '3-5-2')",
          "pattern": "^[0-9](-[0-9])+$"
        },
        "players": {
          "type": "array",
          "description": "Array of players in the confirmed lineup with their positions",
          "minItems": 11,
          "maxItems": 11,
          "items": {
            "type": "object",
            "required": ["position", "name", "confidence"],
            "properties": {
              "position": {
                "type": "string",
                "description": "Position in the formation (e.g., 'GK', 'RB', 'CB', 'LB', 'CM', 'CAM', 'RW', 'LW', 'ST')"
              },
              "name": {
                "type": "string",
                "description": "Name of the player"
              },
              "confidence": {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "description": "Confidence level, always 1.0 for confirmed lineups"
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "source_reliability": {
      "type": "object",
      "description": "Tracks credibility and historical accuracy of sources used for lineup predictions",
      "required": ["sources"],
      "properties": {
        "sources": {
          "type": "array",
          "description": "Array of sources with their reliability metrics",
          "items": {
            "type": "object",
            "required": ["name", "type", "reliability_score"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Name of the source (e.g., journalist name, publication, official channel)"
              },
              "type": {
                "type": "string",
                "description": "Type of source",
                "enum": ["official", "journalist", "aggregator", "fan_account", "unknown"]
              },
              "reliability_score": {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "description": "Historical accuracy score for this source (0.0 to 1.0)"
              },
              "historical_accuracy": {
                "type": "object",
                "description": "Detailed historical accuracy breakdown",
                "properties": {
                  "correct_predictions": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Number of correct lineup predictions"
                  },
                  "total_predictions": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Total number of predictions made"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        },
        "last_updated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of when source reliability was last recalculated"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "match_id": "20260118_ARS_CHE",
      "timestamp": "2026-01-17T10:00:00Z",
      "injuries": [
        {
          "player": "Bukayo Saka",
          "status": "doubtful",
          "return_date": "2026-01-20",
          "source": "press_conference"
        },
        {
          "player": "Takehiro Tomiyasu",
          "status": "out",
          "return_date": null,
          "source": "official_club"
        }
      ],
      "rumored_lineup": {
        "formation": "4-3-3",
        "players": [
          { "position": "GK", "name": "David Raya", "confidence": 0.95 },
          { "position": "RB", "name": "Ben White", "confidence": 0.90 },
          { "position": "CB", "name": "William Saliba", "confidence": 0.98 },
          { "position": "CB", "name": "Gabriel Magalhaes", "confidence": 0.98 },
          { "position": "LB", "name": "Oleksandr Zinchenko", "confidence": 0.75 },
          { "position": "CM", "name": "Declan Rice", "confidence": 0.95 },
          { "position": "CM", "name": "Martin Odegaard", "confidence": 0.92 },
          { "position": "CM", "name": "Thomas Partey", "confidence": 0.80 },
          { "position": "RW", "name": "Gabriel Martinelli", "confidence": 0.70 },
          { "position": "ST", "name": "Kai Havertz", "confidence": 0.88 },
          { "position": "LW", "name": "Leandro Trossard", "confidence": 0.65 }
        ]
      },
      "confirmed_lineup": null,
      "source_reliability": {
        "sources": [
          {
            "name": "David Ornstein",
            "type": "journalist",
            "reliability_score": 0.92,
            "historical_accuracy": {
              "correct_predictions": 46,
              "total_predictions": 50
            }
          },
          {
            "name": "Arsenal Official",
            "type": "official",
            "reliability_score": 1.0,
            "historical_accuracy": {
              "correct_predictions": 100,
              "total_predictions": 100
            }
          }
        ],
        "last_updated": "2026-01-15T00:00:00Z"
      }
    }
  ]
}
